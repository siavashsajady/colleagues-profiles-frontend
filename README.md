# Tretton37 Code Assignment

> Next.js website for DJ Events for displaying all the ninjas of tretton37.

## Usage

### Setup Frontend

To setup the frontend:

1. Clone or download this repo `gh repo clone siavashsajady/colleagues-profiles-frontend`
2. Install dependencies `npm install`
3. Run the project using `npm run dev`

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.

### Setup Backend

The Strapi backend can be found [here](https://github.com/siavashsajady/colleagues-profiles-backend)

Clone the above repo and run your backend.

1. Install dependencies `npm install`
2. Run the project using `npm run develop`

## Features

### Design & Accessability

- Responsive Design
- A Modern Design

### Functionality

- Complete authentication, authorization, access & crud functionality based on the user
- Search by name and office

### Testing

- Works in Chrome, Firefox, Edge, Opera
- Using Cypress with Next.js End to End testing

## Process

The initiation phase of the project started by setting up all the default frontend folders, files, and dependencies for the [Next.js] website.

Once this was done I created a layout for all the pages and installed TailwindCSS.

I first wanted to build a basic design and routes set up before I began to work on the specific features, so chose to use [TailwindCSSI](https://tailwindcss.com/) as my UI framework to be able to get quick access to UI components. For me, one of the top benefits of using a framework like TailwindCSS is the accessibility and responsive features you get for free.

Next, I created a JSON API and started to fetch data from API routes. One reason that I choose to use Next.js is the ability to create API routes within the Next.js structure, in API folder in the pages folder [Next.js API](https://nextjs.org/docs/api-routes/introduction). Initially, I served employees' data from the API folder to create API routes and fetch data, and add a single employee profile page and display all employee data. Next.js provides three data fetching methods, so I used the getServersideProps to fetch data on each request. The getStaticProps method is also available, but I did not use it since it is suitable for a static website and it doesn't fetch on every request, but only at build time.

Next, I started in my backend and I came from [Strapi CMS](https://strapi.io/), as I need a solid backend to work with. So instead of just creating an API from scratch, I used this headless content management system which is a huge trend right now. It gives me a full API and authentication with JSON Web Token. It’s not something that is hosted somewhere else, and you host it yourself. As far as images go to use in this website, I hosted images at [Cloudinary](https://cloudinary.com/), because it’s good for optimization, if you upload an image to Cloudinary, it creates multiple versions, and sizes. So by using the documentation's installation, I set up Strapi CMS to create full API, and in my backend, I just did npm-run-develop which started it back up. Then I signed up in Cloudinary and installed the strapi-provider-upload-cloudinary package that allows us to very easily integrate Strapi and Cloudinary.

As soon as I set up the backend and created some user profiles within Strapi, I connected the frontend to the API that was generated by Strapi, instead of the API routes that I created earlier from within Next.js. So as I did that, things were going to break, and I changed a few things in my code and Next.js cosnfig files.

Once I had the design in a "good" state and that the routing and API stuff was mostly in place, I dug into the feature list to enable some additional features. For example for search functionality, I created a search component and used a third-party module called "qs" or Query String to match multiple fields such as name and office.
Also creating a Modal component with Next.js is a little different than it would be with just regular client-side React because it is server-side rendered. When the page first renders it is server-side and we don’t have access to the “window.document object”. So I used this article [Modal component with Next.js](https://devrecipes.net/modal-component-with-next-js/) as kind of my reference, and then I created the image upload component and put it in the Modal.

Next, I created Auth Context and worked with API routes to securely store the JSON Web Token that I got back from Strapi and store all of my authentication methods, user, and any errors that come from authentication.
